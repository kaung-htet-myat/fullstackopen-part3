(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(16),a=t.n(c),r=t(7),o=t(3),i=t(1),u=t(0),d=function(e){var n=e.searchHandler;return Object(u.jsxs)("div",{children:["filter: ",Object(u.jsx)("input",{onChange:n})]})},s=function(e){var n=e.onSubmitHandler,t=e.newName,c=e.nameChangeHandler,a=e.newNumber,r=e.numberChangeHandler;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:a,onChange:r})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},b=function(e){var n=e.personsToShow,t=e.onPersonDeleteHandler;return Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsxs)("li",{children:[e.name,"\xa0",e.number,Object(u.jsx)("button",{onClick:function(n){return t(n,e.id,e.name)},children:"delete"})]},e.name)}))})},j=function(e){var n=e.name,t=null,c={color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};switch(e.action){case"add":t=Object(u.jsxs)("div",{style:c,children:["Added ",n," to the phonebook"]});break;case"update":t=Object(u.jsxs)("div",{style:c,children:["Updated ",n,"'s number in the phonebook"]});break;case"delete":t=Object(u.jsxs)("div",{style:c,children:["Deleted ",n," from the phonebook"]});break;case"deleted":t=Object(u.jsxs)("div",{style:c,children:[n," has already been deleted from the phonebook"]});break;default:t=null}return t},l=t(4),h=t.n(l),f="/api/persons",m=function(){return h.a.get(f).then((function(e){return e.data}))},O=function(){var e=Object(i.useState)([]),n=Object(o.a)(e,2),t=n[0],c=n[1],a=Object(i.useState)(""),l=Object(o.a)(a,2),O=l[0],p=l[1],x=Object(i.useState)(""),v=Object(o.a)(x,2),g=v[0],w=v[1],k=Object(i.useState)(t),y=Object(o.a)(k,2),S=y[0],H=y[1],C=Object(i.useState)(""),D=Object(o.a)(C,2),N=D[0],E=D[1];Object(i.useEffect)((function(){m().then((function(e){c(e)}))}),[]),Object(i.useEffect)((function(){H(t)}),[t]);var P=function(e){if(e.preventDefault(),t.every((function(e){return e.name!==O})))(function(e,n){var t={name:e,number:n};return h.a.post(f,t).then((function(e){return e.data}))})(O,g).then((function(e){c(t.concat([e])),E(Object(u.jsx)(j,{name:O,action:"add"}))}));else if(window.confirm("".concat(O," is already in the phonebook. Do you want to replace the number?"))){var n=t.find((function(e){return e.name===O}));(function(e){return h.a.put("".concat(f,"/").concat(e.id),e).then((function(e){return e.data}))})(Object(r.a)(Object(r.a)({},n),{},{number:g})).then((function(e){c(t.map((function(n){return n.name!==e.name?n:e}))),E(Object(u.jsx)(j,{name:O,action:"update"}))})).catch((function(e){E(Object(u.jsx)(j,{name:O,action:"deleted"}))}))}};return console.log(N),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(d,{searchHandler:function(e){return n=e,void H(t.filter((function(e){return e.name.match(new RegExp(n.target.value,"i"))})));var n}}),N,Object(u.jsx)("h2",{children:"Add a new "}),Object(u.jsx)(s,{onSubmitHandler:function(e){return P(e)},newName:O,nameChangeHandler:function(e){p(e.target.value)},newNumber:g,numberChangeHandler:function(e){w(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(b,{personsToShow:S,onPersonDeleteHandler:function(e,n,t){window.confirm("Do you want to delete ".concat(t,"?"))&&function(e){return h.a.delete("".concat(f,"/").concat(e)).then((function(e){return e}))}(n).then((function(e){console.log(e),m().then((function(e){c(e),E(Object(u.jsx)(j,{name:t,action:"delete"}))}))})).catch((function(e){E(Object(u.jsx)(j,{name:O,action:"deleted"}))}))}})]})};a.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.595a1492.chunk.js.map