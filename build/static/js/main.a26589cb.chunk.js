(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var c=t(16),o=t.n(c),a=t(7),r=t(3),i=t(1),u=t(0),d=function(e){var n=e.searchHandler;return Object(u.jsxs)("div",{children:["filter: ",Object(u.jsx)("input",{onChange:n})]})},s=function(e){var n=e.onSubmitHandler,t=e.newName,c=e.nameChangeHandler,o=e.newNumber,a=e.numberChangeHandler;return Object(u.jsxs)("form",{onSubmit:n,children:[Object(u.jsxs)("div",{children:["name: ",Object(u.jsx)("input",{value:t,onChange:c})]}),Object(u.jsxs)("div",{children:["number: ",Object(u.jsx)("input",{value:o,onChange:a})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",children:"add"})})]})},l=function(e){var n=e.personsToShow,t=e.onPersonDeleteHandler;return Object(u.jsx)("ul",{children:n.map((function(e){return Object(u.jsxs)("li",{children:[e.name,"\xa0",e.number,Object(u.jsx)("button",{onClick:function(n){return t(n,e.id,e.name)},children:"delete"})]},e.name)}))})},b=function(e){var n=e.name,t=null,c={color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"};switch(e.action){case"add":t=Object(u.jsxs)("div",{style:c,children:["Added ",n," to the phonebook"]});break;case"update":t=Object(u.jsxs)("div",{style:c,children:["Updated ",n,"'s number in the phonebook"]});break;case"delete":t=Object(u.jsxs)("div",{style:c,children:["Deleted ",n," from the phonebook"]});break;case"deleted":t=Object(u.jsxs)("div",{style:c,children:[n," has already been deleted from the phonebook"]});break;case"validationError":t=Object(u.jsx)("div",{style:c,children:n});break;default:t=null}return t},j=t(4),h=t.n(j),f="/api/persons",m=function(){return h.a.get(f).then((function(e){return e.data}))},O=function(){var e=Object(i.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],o=Object(i.useState)(""),j=Object(r.a)(o,2),O=j[0],p=j[1],x=Object(i.useState)(""),v=Object(r.a)(x,2),g=v[0],k=v[1],w=Object(i.useState)(t),y=Object(r.a)(w,2),S=y[0],H=y[1],C=Object(i.useState)(""),D=Object(r.a)(C,2),E=D[0],N=D[1];Object(i.useEffect)((function(){m().then((function(e){c(e)}))}),[]),Object(i.useEffect)((function(){H(t)}),[t]);var P=function(e){if(e.preventDefault(),t.every((function(e){return e.name!==O})))(function(e,n){var t={name:e,number:n};return h.a.post(f,t).then((function(e){return e.data}))})(O,g).then((function(e){c(t.concat([e])),N(Object(u.jsx)(b,{name:O,action:"add"}))})).catch((function(e){console.log(e.response.data),N(Object(u.jsx)(b,{name:e.response.data.error,action:"validationError"}))}));else if(window.confirm("".concat(O," is already in the phonebook. Do you want to replace the number?"))){var n=t.find((function(e){return e.name===O}));console.log(n),function(e){return console.log(e.id),h.a.put("".concat(f,"/").concat(e.id),e).then((function(e){return e.data}))}(Object(a.a)(Object(a.a)({},n),{},{number:g})).then((function(e){c(t.map((function(n){return n.name!==e.name?n:e}))),N(Object(u.jsx)(b,{name:O,action:"update"}))})).catch((function(e){N(Object(u.jsx)(b,{name:O,action:"deleted"}))}))}};return console.log(E),Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{children:"Phonebook"}),Object(u.jsx)(d,{searchHandler:function(e){return n=e,void H(t.filter((function(e){return e.name.match(new RegExp(n.target.value,"i"))})));var n}}),E,Object(u.jsx)("h2",{children:"Add a new "}),Object(u.jsx)(s,{onSubmitHandler:function(e){return P(e)},newName:O,nameChangeHandler:function(e){p(e.target.value)},newNumber:g,numberChangeHandler:function(e){k(e.target.value)}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(l,{personsToShow:S,onPersonDeleteHandler:function(e,n,t){window.confirm("Do you want to delete ".concat(t,"?"))&&function(e){return h.a.delete("".concat(f,"/").concat(e)).then((function(e){return e}))}(n).then((function(e){console.log(e),m().then((function(e){c(e),N(Object(u.jsx)(b,{name:t,action:"delete"}))}))})).catch((function(e){N(Object(u.jsx)(b,{name:O,action:"deleted"}))}))}})]})};o.a.render(Object(u.jsx)(O,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.a26589cb.chunk.js.map